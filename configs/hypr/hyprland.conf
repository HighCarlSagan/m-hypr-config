exec-once=dbus-update-activation-environment --systemd WAYLAND_DISPLAY XDG_CURRENT_DESKTOP
exec-once=/usr/lib/polkit-gnome/polkit-gnome-authentication-agent-1
exec-once = blueman-applet

################
### MONITORS ###
################
monitor = DP-1, 2160x1440@165, 0x0, 1

workspace = 1,monitor:DP-1
workspace = 2,monitor:DP-1
workspace = 3,monitor:DP-1
workspace = 4,monitor:DP-1
workspace = 5,monitor:DP-1
workspace = 6,monitor:DP-1
workspace = 7,monitor:DP-1
workspace = 8,monitor:DP-1
workspace = 9,monitor:DP-1
workspace = 10,monitor:DP-1

###################
### KEYBINDINGS ###
###################

# Music visualizer
bind = SUPER, M, exec, kitty --class floating-cava -e cava

# Applications
bind = SUPER, Return, exec, kitty
bind = SUPER, D, exec, rofi -show drun
bind = SUPER, E, exec, dolphin
bind = SUPER, B, exec, firefox

# Window Management
bind = SUPER, Q, killactive
bind = SUPER SHIFT, Q, exit
bind = SUPER, F, fullscreen
bind = SUPER, V, togglefloating
bind = SUPER, T, togglesplit

# Focus (Arrow keys)
bind = SUPER, left, movefocus, l
bind = SUPER, right, movefocus, r
bind = SUPER, up, movefocus, u
bind = SUPER, down, movefocus, d

# Move Windows (Arrow keys)
bind = SUPER SHIFT, left, movewindow, l
bind = SUPER SHIFT, right, movewindow, r
bind = SUPER SHIFT, up, movewindow, u
bind = SUPER SHIFT, down, movewindow, d

# Resize Windows (Arrow keys)
bind = SUPER CTRL, left, resizeactive, -40 0
bind = SUPER CTRL, right, resizeactive, 40 0
bind = SUPER CTRL, up, resizeactive, 0 -40
bind = SUPER CTRL, down, resizeactive, 0 40

# Alt+Tab window switching
bind = ALT, Tab, cyclenext,
bind = ALT, Tab, bringactivetotop,
bind = ALT SHIFT, Tab, cyclenext, prev

# Workspaces
bind = SUPER, 1, workspace, 1
bind = SUPER, 2, workspace, 2
bind = SUPER, 3, workspace, 3
bind = SUPER, 4, workspace, 4
bind = SUPER, 5, workspace, 5
bind = SUPER, 6, workspace, 6
bind = SUPER, 7, workspace, 7
bind = SUPER, 8, workspace, 8
bind = SUPER, 9, workspace, 9
bind = SUPER, 0, workspace, 10

# Move to Workspace
bind = SUPER SHIFT, 1, movetoworkspace, 1
bind = SUPER SHIFT, 2, movetoworkspace, 2
bind = SUPER SHIFT, 3, movetoworkspace, 3
bind = SUPER SHIFT, 4, movetoworkspace, 4
bind = SUPER SHIFT, 5, movetoworkspace, 5
bind = SUPER SHIFT, 6, movetoworkspace, 6
bind = SUPER SHIFT, 7, movetoworkspace, 7
bind = SUPER SHIFT, 8, movetoworkspace, 8
bind = SUPER SHIFT, 9, movetoworkspace, 9
bind = SUPER SHIFT, 0, movetoworkspace, 10

# Workspace Navigation
bind = SUPER, TAB, workspace, e+1
bind = SUPER SHIFT, TAB, workspace, e-1
bind = SUPER, mouse_down, workspace, e+1
bind = SUPER, mouse_up, workspace, e-1

# Screenshots
bind = , Print, exec, hyprshot -m region --clipboard-only
bind = SHIFT, Print, exec, hyprshot -m output --clipboard-only
bind = CTRL, Print, exec, hyprshot -m window --clipboard-only
# Screenshot with 3-second delay (for capturing popups)
bind = ALT, Print, exec, sleep 3 && hyprshot -m output --clipboard-only

# System
bind = SUPER, ESCAPE, exec, hyprlock
bind = SUPER, W, exec, killall waybar || waybar

# Mouse
bindm = SUPER, mouse:272, movewindow
bindm = SUPER, mouse:273, resizewindow

# Media Keys
bindel = ,XF86AudioRaiseVolume, exec, wpctl set-volume @DEFAULT_AUDIO_SINK@ 5%+
bindel = ,XF86AudioLowerVolume, exec, wpctl set-volume @DEFAULT_AUDIO_SINK@ 5%-
bindel = ,XF86AudioMute, exec, wpctl set-mute @DEFAULT_AUDIO_SINK@ toggle
bindel = ,XF86AudioMicMute, exec, wpctl set-mute @DEFAULT_AUDIO_SOURCE@ toggle
bindel = ,XF86MonBrightnessUp, exec, brightnessctl s 10%+
bindel = ,XF86MonBrightnessDown, exec, brightnessctl s 10%-
bindl = , XF86AudioNext, exec, playerctl next
bindl = , XF86AudioPause, exec, playerctl play-pause
bindl = , XF86AudioPlay, exec, playerctl play-pause
bindl = , XF86AudioPrev, exec, playerctl previous

bind = SUPER, Delete, exec, ~/.config/rofi/powermenu.sh

#################
### AUTOSTART ###
#################

exec-once=waybar
exec-once=swww-daemon
#exec-once=swww img ~/.config/hypr/wallpaper.jpg
exec-once=swww img /home/carl/Pictures/Wallpapers/cyberpunk.jpg
# Workspace 1: Firefox & Terminal
exec-once = [workspace 1 silent] firefox
exec-once = [workspace 1 silent] kitty

# Workspace 2: Brave
exec-once = [workspace 2 silent] brave

# Workspace 3: Spotify, Telegram, WhatsApp
exec-once = [workspace 3 silent] spotify
exec-once = [workspace 3 silent] Telegram
exec-once = [workspace 3 silent] wasistlos


#############################
### ENVIRONMENT VARIABLES ###
#############################

env = XCURSOR_SIZE,24
env = HYPRCURSOR_SIZE,24
exec-once=hyprctl setcursor hypr-dots-anonymous 24
exec-once=gsettings set org.gnome.desktop.interface cursor-theme 'hypr-dots-anonymous' &> /dev/null

#####################
### LOOK AND FEEL ###
#####################

general {
    gaps_in = 10
    gaps_out = 40
    border_size = 3
    col.active_border = rgba(EF3946ff) rgba(EF3946ff) 45deg
    col.inactive_border = rgba(00000000)
    resize_on_border = false
    allow_tearing = false
    layout = dwindle
}

decoration {
    rounding = 10
    active_opacity = 0.9
    inactive_opacity = 0.3
    
    shadow {
        enabled = true
        range = 25
        render_power = 3
        color = rgba(EF3946ff)
        color_inactive = rgba(00000000)
    }
    
    blur {
        enabled = true
        size = 1
        passes = 5
        vibrancy = 0.1696
    }
}

animations {
    enabled = true
    bezier = winIn, 0.1, 1.0, 0.1, 1.0
    bezier = winOut, 0.1, 1.0, 0.1, 1.0
    bezier = smoothOut, 0.5, 0, 0.99, 0.99
    bezier = layerOut, 0.23, 1, 0.32, 1
    animation = windows, 1, 7, winIn, slide
    animation = windowsOut, 1, 3, smoothOut, slide
    animation = windowsMove, 1, 7, winIn, slide
    animation = workspaces, 1, 8, winIn, slide
    animation = workspacesOut, 1, 8, winOut, slide
    animation = layers, 1, 10, winIn, slide
    animation = layersOut, 1, 3, layerOut, popin 50%
}

dwindle {
    pseudotile = true 
    preserve_split = true 
}

master {
    new_status = master
}

misc {
    force_default_wallpaper = -1
    disable_hyprland_logo = false
}

#############
### INPUT ###
#############

input {
    kb_layout = us,br
    kb_variant =
    kb_model =
    kb_options = grp:ctrl_space_toggle
    kb_rules =
    accel_profile = flat
    follow_mouse = 1
    sensitivity = 0.8
    repeat_rate = 50        
    repeat_delay = 200  
    touchpad {
        natural_scroll = false
    }
}

##############################
### WINDOWS AND WORKSPACES ###
##############################

windowrulev2 = suppressevent maximize, class:.*
windowrulev2 = nofocus,class:^$,title:^$,xwayland:1,floating:1,fullscreen:0,pinned:0
windowrulev2 = float, class:^(floating-cava)$
windowrulev2 = size 800 400, class:^(floating-cava)$
windowrulev2 = center, class:^(floating-cava)$
windowrulev2 = animation slide, class:^(floating-cava)$


# Autostart visualizer
#exec-once = kitty --class cava-desktop -e cava

# OpenRGB - Load profile at startup
exec-once = openrgb --startminimized --profile "/home/carl/.config/OpenRGB/dark_white.orp"

##############################
### WINDOWS AND WORKSPACES ###
##############################

# Workspace 1: Firefox & Terminal
windowrulev2 = workspace 1, class:^(firefox)$
windowrulev2 = workspace 1, title:^(kitty)$

# Workspace 2: Brave
windowrulev2 = workspace 2, class:^(Brave-browser)$

# Workspace 3: Spotify, Telegram, WhatsApp
windowrulev2 = workspace 3, class:^(Spotify)$
windowrulev2 = workspace 3, class:^(telegram|Telegram)$
windowrulev2 = workspace 3, class:^(wasistlos|whatsapp)$

# Keep existing rules below
windowrulev2 = suppressevent maximize, class:.*
windowrulev2 = nofocus,class:^$,title:^$,xwayland:1,floating:1,fullscreen:0,pinned:0
windowrulev2 = float, class:^(floating-cava)$
windowrulev2 = size 800 400, class:^(floating-cava)$
windowrulev2 = center, class:^(floating-cava)$
windowrulev2 = animation slide, class:^(floating-cava)$

# KiCad - disable all opacity effects
windowrulev2 = opaque, class:^(kicad)$
windowrulev2 = opaque, class:^(kicad-nightly)$

# Spotify music popup - floating and centered
windowrulev2 = float, title:^(ðŸŽµ Spotify)$
windowrulev2 = size 380 400, title:^(ðŸŽµ Spotify)$
windowrulev2 = center, title:^(ðŸŽµ Spotify)$
windowrulev2 = animation slide, title:^(ðŸŽµ Spotify)$
windowrulev2 = pin, title:^(ðŸŽµ Spotify)$
windowrulev2 = dimaround, title:^(ðŸŽµ Spotify)$

# Calendar popup - floating and styled
#windowrulev2 = float, title:^(Calendar)$
#windowrulev2 = size 450 400, title:^(Calendar)$
#windowrulev2 = center, title:^(Calendar)$
#windowrulev2 = animation slide, title:^(Calendar)$
#windowrulev2 = dimaround, title:^(Calendar)$

# YAD Calendar popup - floating and styled
windowrulev2 = float, title:^(ðŸ“… Calendar)$
windowrulev2 = size 480 420, title:^(ðŸ“… Calendar)$
windowrulev2 = center, title:^(ðŸ“… Calendar)$
windowrulev2 = animation slide, title:^(ðŸ“… Calendar)$
windowrulev2 = dimaround, title:^(ðŸ“… Calendar)$
windowrulev2 = pin, title:^(ðŸ“… Calendar)$

#############################
#######MISC##################
############################
# Enable lock on loginctl
exec-once = hyprlock --lock-on-signal
